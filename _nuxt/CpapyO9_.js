import{d as N,l as R,f as C,r as U,c as f,o as d,g as t,w as u,h as w,m as z,t as c,u as s,v as k,p as I,a as p,q as g,_ as B,b as i,j as _,k as F,s as L,M as b,n as V,e as D}from"./Cg7vJITO.js";const A={class:"medium-title"},O=["type"],j={key:2},q=["type"],Y={class:"buttons"},G={type:"submit"},H={class:"center"},J={class:"conditions"},K=N({__name:"login",props:{setMessage:{type:Function}},setup($){const m=$,{loggedIn:E,fetch:P}=R(),a=C(!0),o=U({name:"",surname:"",email:"",password:"",confirmPassword:""}),l=C(["password","password"]),y=(n,e)=>{e?l.value[n]=e:l.value[n]=l.value[n]==="password"?"text":"password"},M=()=>{o.name="",o.surname="",o.email="",o.password="",o.confirmPassword="",y(0,"password"),y(1,"password")},T=()=>{E.value||(a.value?S():h())},S=async()=>{try{const n=await $fetch("/api/auth/login",{method:"POST",body:{email:o.email,password:o.password}});m.setMessage(b.Info,n.message),await P(),await V("/")}catch(n){m.setMessage(b.Error,"Error, please try again."),console.error("Error: ",n)}},h=async()=>{try{const n=await $fetch("/api/auth/register",{method:"POST",body:o});m.setMessage(b.Info,n.message),await P(),await V("/profile")}catch(n){m.setMessage(b.Error,"Error, please try again."),console.error("Error: ",n)}};return(n,e)=>{const v=B,x=F;return d(),f("form",{novalidate:"",onSubmit:L(T,["prevent"]),onReset:M},[t("p",A,c(s(a)?"Log In":"Register"),1),s(a)?w("",!0):u((d(),f("input",{key:0,"onUpdate:modelValue":e[0]||(e[0]=r=>s(o).name=r),type:"text",placeholder:"Name"},null,512)),[[k,s(o).name]]),s(a)?w("",!0):u((d(),f("input",{key:1,"onUpdate:modelValue":e[1]||(e[1]=r=>s(o).surname=r),type:"text",placeholder:"Surname"},null,512)),[[k,s(o).surname]]),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>s(o).email=r),type:"email",placeholder:"Email"},null,512),[[k,s(o).email]]),t("div",null,[u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>s(o).password=r),type:s(l)[0],placeholder:"Password",class:"password"},null,8,O),[[I,s(o).password]]),t("div",{class:"eye pointer",onClick:e[4]||(e[4]=r=>y(0))},[p(v,{name:"mdi:eye-off-outline",size:"30px",style:{color:"#000"},class:g(`icon ${s(l)[0]=="password"?"active":""}`)},null,8,["class"]),p(v,{name:"mdi:eye-outline",size:"30px",style:{color:"#000"},class:g(`icon ${s(l)[0]=="text"?"active":""}`)},null,8,["class"])])]),s(a)?w("",!0):(d(),f("div",j,[u(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>s(o).confirmPassword=r),type:s(l)[1],placeholder:"Confirm Password",class:"password"},null,8,q),[[I,s(o).confirmPassword]]),t("div",{class:"eye pointer",onClick:e[6]||(e[6]=r=>y(1))},[p(v,{name:"mdi:eye-off-outline",size:"30px",style:{color:"#000"},class:g(`icon ${s(l)[1]=="password"?"active":""}`)},null,8,["class"]),p(v,{name:"mdi:eye-outline",size:"30px",style:{color:"#000"},class:g(`icon ${s(l)[1]=="text"?"active":""}`)},null,8,["class"])])])),t("div",Y,[e[8]||(e[8]=t("button",{type:"reset",class:"black-button"},"Reset Form",-1)),t("button",G,c(s(a)?"Log In":"Register"),1)]),t("p",H,[i(c(s(a)?"Don't have an account yet?":"Already have an account?")+" ",1),t("span",{class:"bold pointer hover-opacity",onClick:e[7]||(e[7]=r=>{a.value=!s(a),M()})},c(s(a)?"Register":"Log In"),1),e[9]||(e[9]=i(". ",-1))]),s(a)?(d(),z(x,{key:3,to:"/forgot-password",class:"bold pointer hover-opacity"},{default:_(()=>[...e[10]||(e[10]=[i("Forgot Password?",-1)])]),_:1})):w("",!0),t("p",J,[i(' By clicking the "'+c(s(a)?"Log In":"Register")+'" button above, You are accepting our ',1),p(x,{to:"/terms-and-conditions",class:"bold pointer hover-opacity"},{default:_(()=>[...e[11]||(e[11]=[i("Terms and Conditions",-1)])]),_:1}),e[13]||(e[13]=i(" and ",-1)),p(x,{to:"/privacy-policy",class:"bold pointer hover-opacity"},{default:_(()=>[...e[12]||(e[12]=[i("Privacy Policy",-1)])]),_:1}),e[14]||(e[14]=i(". ",-1))])],32)}}}),W=D(K,[["__scopeId","data-v-f70de878"]]);export{W as default};
